<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Servers & Games - Arcator.co.uk</title>
    <!-- Tailwind CSS CDN -->
    <link rel="stylesheet" href="css/style.css" />
    <!-- Google Fonts - Inter -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Link to master.css for all styles -->
    <link href="master.css" rel="stylesheet" />
    <!-- Favicon link -->
    <link href="favicon.png" rel="icon" type="image/png" />

    <style>
      /* Base styles */
      body {
        font-family: "Inter", sans-serif;
        background-color: var(--color-body-bg);
        color: var(--color-text-primary);
        transition:
          background-color 0.3s,
          color 0.3s;
      }

      /* Hero Banner styles - common for all themes, retains background image */
      .hero-banner {
        background-image: url("https://jylina.arcator.co.uk/standalone/img/creativespawn.png");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        min-height: 250px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
      }

      .hero-banner::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1;
      }

      .hero-content {
        position: relative;
        z-index: 2;
        color: white;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
      }

      /* Tab Navigation Styles */
      .tab-container {
        display: flex;
        justify-content: center;
        margin-bottom: 2rem;
        border-bottom: 2px solid var(--color-input-border);
        padding-bottom: 0;
      }

      .tab-button {
        border: none;
        padding: 1rem 2rem;
        margin: 0 0.5rem;
        border-radius: 0.75rem 0.75rem 0 0;
        cursor: pointer;
        font-weight: 600;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        border-bottom: 3px solid transparent;
      }

      .tab-button.active {
        border-bottom-color: var(--color-link);
      }

      /* Content sections */
      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      /* Server-specific styles */
      .minecraft-ip-box {
        border: 2px solid var(--color-input-border);
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
      }

      .text-white {
        color: white !important;
      }

      .text-teal-300 {
        color: var(--color-link) !important;
      }

      .text-orange-400 {
        color: var(--color-button-yellow-hover) !important;
      }

      .text-purple-300 {
        color: var(--color-button-purple-bg) !important;
      }

      /* Game card specific background */
      .game-card {
        border-radius: 0.75rem;
        padding: 1.5rem;
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        transition:
          transform 0.3s ease,
          box-shadow 0.3s ease;
      }

      .game-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      }

      /* Server card styling */
      .server-card {
        border-radius: 0.75rem;
        padding: 1.5rem;
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        transition:
          transform 0.3s ease,
          box-shadow 0.3s ease;
      }

      .server-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      }

      /* Responsive design */
      @media (max-width: 768px) {
        .tab-container {
          flex-direction: column;
          align-items: center;
        }

        .tab-button {
          margin: 0.25rem 0;
          border-radius: 0.5rem;
          width: 100%;
          max-width: 300px;
        }

        .tab-button.active {
          border-bottom-color: transparent;
        }
      }

      .main-section,
      .games-section,
      .content-section {
        background-color: var(--color-bg-content-section);
        color: var(--color-text-primary);
      }
    </style>
  </head>
  <body class="antialiased">
    <!-- Navbar Placeholder -->
    <div class="w-full absolute top-0 left-0" id="navbar-placeholder"></div>

    <!-- Hero Section with Background Image -->
    <section
      class="hero-banner rounded-b-lg shadow-xl"
      style="margin-top: 64px"
    >
      <div class="container mx-auto px-4 text-center hero-content">
        <h1 class="text-5xl md:text-6xl font-extrabold mb-4 leading-tight">
          Servers & Games
        </h1>
        <p class="text-xl md:text-2xl mb-8">
          Explore our Minecraft servers and discover other games we play
        </p>
      </div>
    </section>

    <!-- Tab Navigation -->
    <div class="container mx-auto px-4 mt-8">
      <div class="tab-container">
        <button class="tab-btn active" id="tab-servers">Servers</button>
        <button class="tab-btn" id="tab-games">Games</button>
        <button class="tab-btn" id="tab-events">Events</button>
      </div>
    </div>

    <!-- Servers Tab Content -->
    <div class="tab-content" id="servers-tab-content">
      <section class="content-section">
        <h2 class="text-3xl font-bold text-heading-main mb-6">Our Servers</h2>
        <ul class="feature-list">
          <li><span class="highlight">Survival:</span> Classic Minecraft with a friendly community.</li>
          <li><span class="highlight">Creative:</span> Build freely with unlimited resources.</li>
          <li><span class="highlight">Mini-Games:</span> Fun, competitive, and casual games for all.</li>
          <li><span class="highlight">Events:</span> Regular community events and competitions.</li>
        </ul>
      </section>
    </div>

    <!-- Games Tab Content -->
    <div class="tab-content" id="games-tab-content" style="display:none">
      <section class="content-section">
        <h2 class="text-3xl font-bold text-heading-main mb-6">Games</h2>
        <ul class="feature-list">
          <li><span class="highlight">BedWars:</span> Team PvP and base defense.</li>
          <li><span class="highlight">SkyBlock:</span> Survival on a floating island.</li>
          <li><span class="highlight">Parkour:</span> Challenging obstacle courses.</li>
        </ul>
      </section>
    </div>

    <!-- Events Tab Content -->
    <div class="tab-content" id="events-tab-content" style="display:none">
      <section class="content-section">
        <h2 class="text-3xl font-bold text-heading-main mb-6">Events</h2>
        <ul class="feature-list">
          <li><span class="highlight">Build Contests:</span> Show off your creativity.</li>
          <li><span class="highlight">Community Nights:</span> Play together and win prizes.</li>
          <li><span class="highlight">Seasonal Events:</span> Special events for holidays and milestones.</li>
        </ul>
      </section>
    </div>

    <!-- Footer Section -->
    <div id="footer-placeholder"></div>

    <!-- Main JavaScript -->
    <script type="module">
      import {
        auth,
        getUserProfileFromFirestore,
        firebaseReadyPromise,
        DEFAULT_PROFILE_PIC,
        DEFAULT_THEME_NAME,
      } from "./firebase-init.js";
      import { loadNavbar, loadFooter } from "./navbar.js";
      import {
        getAvailableThemes,
        applyTheme,
        applyCachedTheme,
      } from "./themes.js";
      import { setupTabs } from './core.js';

      // Tab functionality
      setupTabs('.tab-btn', '.tab-content');

      // Function to copy IP address to clipboard
      window.copyIp = function (ipAddress) {
        navigator.clipboard
          .writeText(ipAddress)
          .then(function () {
            // Show success feedback
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = "Copied!";
            button.style.background = "var(--color-button-green-bg)";

            setTimeout(() => {
              button.textContent = originalText;
              button.style.background = "";
            }, 2000);
          })
          .catch(function (err) {
            console.error("Could not copy text: ", err);
            // Fallback for older browsers
            const tempInput = document.createElement("input");
            tempInput.value = ipAddress;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand("copy");
            document.body.removeChild(tempInput);
          });
      };

      // Apply cached theme immediately to prevent flash
      applyCachedTheme();

      firebaseReadyPromise.then(() => {
        auth.onAuthStateChanged(async (user) => {
          let userProfile = null;
          if (user) {
            userProfile = await getUserProfileFromFirestore(user.uid);
          }
          await loadNavbar(user, userProfile, DEFAULT_PROFILE_PIC, "dark");
          loadFooter("current-year-servers-and-games");
          const userThemePreference = userProfile?.themePreference;
          const allThemes = await getAvailableThemes();
          const themeToApply =
            allThemes.find((t) => t.id === userThemePreference) ||
            allThemes.find((t) => t.id === "dark");
          if (themeToApply) {
            applyTheme(themeToApply.id, themeToApply);
            console.log(
              `Servers and Games page: Applied theme ${themeToApply.id} (${themeToApply.name})`,
            );
          }
        });
      });
    </script>
  </body>
</html>
