<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Support Us - Arcator.co.uk</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts - Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Link to theme_variables.css for centralized CSS variables -->
  <link rel="stylesheet" href="theme_variables.css">
  <!-- Link to navbar.css for navbar specific styling -->
  <link rel="stylesheet" href="navbar.css">

  <style>
    /* Base styles, will be overridden by CSS variables from themes.js */
    body {
      font-family: 'Inter', sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
      background-color: var(--color-body-bg);
      color: var(--color-text-primary);
      background-image: linear-gradient(45deg, rgba(0,0,0,0.1) 25%, transparent 25%, transparent 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1) 75%, transparent 75%, transparent);
      background-size: 20px 20px;
      background-attachment: fixed;
    }

    /* Hero Banner styles - common for all themes, retains background image */
    .hero-banner {
      background-image: url('https://jylina.arcator.co.uk/standalone/img/creativespawn.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      min-height: 250px; /* Adjust height for inner pages */
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }
    .hero-banner::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5); /* Dark overlay for text readability */
      z-index: 1;
    }
    .hero-content {
      position: relative;
      z-index: 2;
      color: white;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.7); /* Text shadow for better readability on image */
    }

    /* Dynamic theme application for various elements */
    .bg-gray-800 {
      background-color: var(--color-bg-content-section) !important;
    }
    .bg-gray-700 {
      background-color: var(--color-bg-card) !important;
    }
    .bg-gray-900 {
      background-color: var(--color-bg-navbar) !important; /* For footer */
    }
    .text-gray-300 {
      color: var(--color-text-secondary) !important;
    }
    .text-gray-400 {
      color: var(--color-text-secondary) !important;
    }
    .text-gray-50 {
      color: var(--color-text-primary) !important; /* For logo/site title in navbar */
    }
    .text-red-400 {
      color: var(--color-heading-main) !important;
    }
    .text-blue-600 { /* For buttons */
      background-color: var(--color-button-blue-bg) !important;
      color: var(--color-button-text) !important;
    }
    .hover\:bg-blue-700:hover {
      background-color: var(--color-button-blue-hover) !important;
    }
    .bg-red-600 { /* For Patreon button */
      background-color: var(--color-button-red-bg) !important;
      color: var(--color-button-text) !important;
    }
    .hover\:bg-red-700:hover {
      background-color: var(--color-button-red-hover) !important;
    }
    .hover\:text-white:hover { /* For footer links */
      color: var(--color-text-primary) !important;
    }

    /* Table styling - using CSS variables */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      margin-bottom: 1rem;
      background-color: var(--color-bg-card); /* Table background */
      color: var(--color-text-primary);
      border-radius: 0.5rem;
      overflow: hidden; /* Ensures rounded corners apply to content */
    }
    th, td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid var(--color-table-td-border); /* Dynamic border color */
    }
    th {
      background-color: var(--color-table-th-bg); /* Dynamic header background */
      color: var(--color-table-th-text); /* Dynamic header text color */
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    tr:nth-child(even) {
      background-color: var(--color-table-row-even-bg); /* Dynamic even row background */
    }
    tr:hover {
      background-color: var(--color-input-border); /* Lighter background on hover (using input border color) */
    }
  </style>
</head>
<body class="antialiased">
<!-- Navbar Placeholder -->
<div id="navbar-placeholder" class="w-full absolute top-0 left-0"></div>

<!-- Hero Section with Background Image -->
<section class="hero-banner rounded-b-lg shadow-xl" style="margin-top: 64px;"> <!-- Adjusted margin-top to account for fixed navbar height -->
  <div class="container mx-auto px-4 text-center hero-content">
    <h1 class="text-5xl md:text-6xl font-extrabold mb-4 leading-tight">Support Arcator.co.uk</h1>
    <p class="text-xl md:text-2xl mb-8">Your contributions help us keep the servers running!</p>
  </div>
</section>

<!-- Main Content Section: Donations -->
<section id="donations" class="py-16 bg-gray-800 rounded-lg shadow-inner mx-4 my-8">
  <div class="container mx-auto px-4">
    <h2 class="text-4xl font-bold text-red-400 text-center mb-10">How You Can Help</h2>
    <div class="max-w-3xl mx-auto text-lg leading-relaxed text-gray-300 space-y-6 text-center">
      <p>Running and maintaining a dedicated Minecraft server network requires significant resources, including server hosting, domain names, and development tools. Your generous donations help us cover these costs and allow us to continually improve the Arcator experience for everyone.</p>
      <p>We deeply appreciate any support you can offer. Every contribution, no matter how small, makes a big difference in keeping our community thriving.</p>
    </div>

    <div class="mt-12 overflow-x-auto rounded-lg shadow-xl">
      <table class="min-w-full">
        <thead>
        <tr>
          <th class="py-3 px-6 text-xl">Donation Method</th>
          <th class="py-3 px-6 text-xl">Details</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td class="py-4 px-6 font-semibold text-white">Discord</td>
          <td class="py-4 px-6">
            <p>Join our Discord server to learn about other ways to support us, including in-game rewards or specific contribution drives.</p>
            <a href="https://discord.gg/GwArgw2" target="_blank" rel="noopener noreferrer" class="inline-block bg-blue-600 text-white font-bold py-3 px-8 rounded-full mt-6 hover:bg-blue-700 transition duration-300 ease-in-out transform hover:scale-105 shadow-lg">Join Our Discord to Donate</a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- Footer Section -->
<footer class="bg-gray-900 py-8 text-center text-gray-400 rounded-t-lg shadow-inner mt-8">
  <div class="container mx-auto px-4">
    <p>© 2012 - <span id="current-year-donations"></span> Arcator.co.uk. All rights reserved.</p>
    <p class="mt-2">Made with ❤️ for the Minecraft Community.</p>
    <div class="flex flex-wrap justify-center space-x-6 mt-4">
      <a href="privacy.html" class="hover:text-white transition duration-300 ease-in-out">Privacy Policy</a>
      <a href="terms.html" class="hover:text-white transition duration-300 ease-in-out">Terms of Service</a>
      <a href="https://wiki.arcator.co.uk/" target="_blank" rel="noopener noreferrer" class="hover:text-white transition duration-300 ease-in-out">Wiki</a>
      <a href="infrastructure.html" class="hover:text-white transition duration-300 ease-in-out">Infrastructure</a>
      <a href="admin_and_dev.html" class="hover:text-white transition duration-300 ease-in-out">Admin & Dev</a>
    </div>
  </div>
</footer>

<!-- External JavaScript modules -->
<script type="module" src="themes.js"></script>
<script type="module" src="navbar.js"></script>
<script type="module" src="firebase-init.js"></script> <!-- Import centralized Firebase init -->
<script type="module">
  // Specific JavaScript for this page
  import { auth, db, appId, getCurrentUser } from './firebase-init.js'; // Import centralized Firebase instances
  import { applyTheme, getAvailableThemes } from './themes.js'; // Import for theme application

  const DEFAULT_THEME_NAME = 'dark'; // Consistent with firebase-init.js
  const DEFAULT_PROFILE_PIC = 'https://placehold.co/32x32/1F2937/E5E7EB?text=AV'; // Consistent with firebase-init.js


  // Main execution logic on window load
  window.onload = async function() {
    // Firebase is now initialized by firebase-init.js which is loaded first.
    // Ensure all Firebase functions are available before usage.
    // The loadNavbar function will now use the globally available auth/db from firebase-init.js.
    await loadNavbar({ auth, db, appId }, DEFAULT_PROFILE_PIC, DEFAULT_THEME_NAME);
    document.getElementById('current-year-donations').textContent = new Date().getFullYear();

    // After everything is loaded and Firebase is ready, apply the user's theme
    // onAuthStateChanged is handled by navbar.js and firebase-init.js for initial setup.
    // This part ensures the theme is applied once user state is known.
    if (auth) {
      auth.onAuthStateChanged(async (user) => {
        let userThemePreference = null;
        if (user) {
          // Use the getUserProfileFromFirestore from firebase-init for consistency
          const getUserProfileFromFirestore = async (uid) => {
            if (!db) { console.error("Firestore DB not initialized."); return null; }
            const userDocRef = doc(db, `artifacts/${appId}/public/data/user_profiles`, uid);
            try {
              const docSnap = await getDoc(userDocRef);
              if (docSnap.exists()) return docSnap.data();
            } catch (error) { console.error("Error fetching user profile:", error); }
            return null;
          };
          const userProfile = await getUserProfileFromFirestore(user.uid);
          userThemePreference = userProfile?.themePreference;
        }
        const allThemes = await getAvailableThemes();
        const themeToApply = allThemes.find(t => t.id === userThemePreference) || allThemes.find(t => t.id === DEFAULT_THEME_NAME);
        applyTheme(themeToApply.id, themeToApply);
      });
    }
  };
</script>
</body>
</html>
