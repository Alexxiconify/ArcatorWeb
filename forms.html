<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Community Forms - Arcator.co.uk</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts - Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome for icons (e.g., trash icon) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <!-- Link to theme_variables.css for centralized CSS variables if it exists -->
  <link rel="stylesheet" href="theme_variables.css">
  <!-- Link to navbar.css for navbar specific styling -->
  <link rel="stylesheet" href="navbar.css">

  <style>
    /* Base styles, will be overridden by CSS variables from themes.js */
    body {
      font-family: 'Inter', sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
      background-color: var(--color-body-bg);
      color: var(--color-text-primary);
      background-image: linear-gradient(45deg, rgba(0,0,0,0.1) 25%, transparent 25%, transparent 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1) 75%, transparent 75%, transparent);
      background-size: 40px 40px;
    }
    /* Specific styles for elements to use CSS variables if defined */
    .container-bg {
      background-color: var(--color-container-bg);
    }
    .card-bg {
      background-color: var(--color-card-bg);
    }
    .text-primary {
      color: var(--color-text-primary);
    }
    .text-secondary {
      color: var(--color-text-secondary);
    }
    .button-primary {
      background-color: var(--color-button-primary);
      color: var(--color-button-text);
    }
    .button-primary:hover {
      background-color: var(--color-button-primary-hover);
    }
    .input-field {
      background-color: var(--color-input-bg);
      color: var(--color-input-text);
      border-color: var(--color-input-border);
    }

    /* Message box styling (retained from previous versions) */
    .message-box {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #333;
      color: white;
      padding: 15px 30px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      display: none; /* Hidden by default */
      font-size: 1rem;
      text-align: center;
    }
    .message-box.success {
      background-color: #4CAF50; /* Green for success */
    }
    .message-box.error {
      background-color: #F44336; /* Red for error */
    }

    /* Custom Confirm Modal Styling */
    .custom-confirm-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      display: flex; /* Use flex to center content */
      justify-content: center;
      align-items: center;
      z-index: 1000;
      display: none; /* Hidden by default */
    }
    .custom-confirm-content {
      background-color: var(--color-container-bg);
      color: var(--color-text-primary);
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
      text-align: center;
      max-width: 400px;
      width: 90%;
      position: relative;
    }
    .custom-confirm-content .close-button {
      position: absolute;
      top: 10px;
      right: 15px;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--color-text-secondary);
      cursor: pointer;
    }
    .custom-confirm-content .close-button:hover {
      color: var(--color-link);
    }
  </style>
</head>
<body class="min-h-screen flex flex-col text-primary">
<!-- Navbar Placeholder -->
<div id="navbar-placeholder"></div>

<!-- Main Content Area -->
<main class="flex-grow container mx-auto p-4 md:p-8">
  <div class="max-w-4xl mx-auto container-bg p-6 rounded-lg shadow-xl">
    <h1 class="text-4xl font-bold text-center text-primary mb-8">Community Hub</h1>

    <!-- Tab Navigation -->
    <nav class="flex border-b border-gray-600 mb-8">
      <button id="tab-forum" class="tab-button flex-1 py-3 text-lg font-medium border-b-2 border-transparent hover:border-blue-500 text-gray-300 hover:text-blue-300 transition-all duration-200 active-tab">Forum</button>
      <button id="tab-dms" class="tab-button flex-1 py-3 text-lg font-medium border-b-2 border-transparent hover:border-blue-500 text-gray-300 hover:text-blue-300 transition-all duration-200">Direct Messages</button>
      <button id="tab-announcements" class="tab-button flex-1 py-3 text-lg font-medium border-b-2 border-transparent hover:border-blue-500 text-gray-300 hover:text-blue-300 transition-all duration-200">Announcements</button>
    </nav>

    <!-- Forum Section (Initially Active) -->
    <section id="content-forum" class="tab-content">
      <h2 class="text-3xl font-semibold text-primary mb-6">Community Forum</h2>
      <div class="mb-8 p-6 bg-gray-800 rounded-lg shadow-md">
        <h3 class="text-2xl font-bold text-blue-300 mb-4">Create New Thread</h3>
        <form id="create-thread-form" class="space-y-4">
          <div>
            <label for="thread-title" class="block text-gray-300 text-sm font-bold mb-2">Title</label>
            <input type="text" id="thread-title" placeholder="Enter thread title" required
                   class="input-field w-full p-3 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label for="thread-content" class="block text-gray-300 text-sm font-bold mb-2">Content</label>
            <textarea id="thread-content" placeholder="Write your thread content here..." rows="6" required
                      class="input-field w-full p-3 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
          </div>
          <button type="submit" class="button-primary w-full py-3 rounded-md font-bold text-lg hover:shadow-lg transition duration-300">Post Thread</button>
        </form>
      </div>

      <h2 class="text-3xl font-semibold text-primary mt-10 mb-6">Recent Threads</h2>
      <div id="threads-loading-error" class="text-red-500 text-center py-4 hidden"></div>
      <div id="no-threads-message" class="text-gray-400 text-center py-4 hidden">No threads yet. Be the first to post!</div>
      <div id="threads-list" class="space-y-8">
        <!-- Forum threads will be dynamically loaded here by forms.js -->
      </div>
    </section>

    <!-- Direct Messages Section (Initially Hidden) -->
    <section id="content-dms" class="tab-content hidden">
      <h2 class="text-3xl font-semibold text-primary mb-6">Direct Messages</h2>
      <div class="mb-8 p-6 bg-gray-800 rounded-lg shadow-md">
        <h3 class="text-2xl font-bold text-blue-300 mb-4">Send New Direct Message</h3>
        <form id="send-dm-form" class="space-y-4">
          <div>
            <label for="dm-receiver-handle" class="block text-gray-300 text-sm font-bold mb-2">Recipient Handle (e.g., @username)</label>
            <input type="text" id="dm-receiver-handle" placeholder="Enter recipient's handle" required
                   class="input-field w-full p-3 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label for="dm-content" class="block text-gray-300 text-sm font-bold mb-2">Message</label>
            <textarea id="dm-content" placeholder="Type your message here..." rows="4" required
                      class="input-field w-full p-3 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
          </div>
          <button type="submit" class="button-primary w-full py-3 rounded-md font-bold text-lg hover:shadow-lg transition duration-300">Send Message</button>
        </form>
      </div>

      <h2 class="text-3xl font-semibold text-primary mt-10 mb-6">Your Messages</h2>
      <div id="dms-list" class="space-y-4">
        <p class="text-gray-400 text-center py-4" id="no-dms-message">No direct messages yet.</p>
        <!-- Direct messages will be dynamically loaded here by forms.js -->
      </div>
    </section>

    <!-- Announcements Section (Initially Hidden) -->
    <section id="content-announcements" class="tab-content hidden">
      <h2 class="text-3xl font-semibold text-primary mb-6">Announcements</h2>

      <!-- Admin-only Announcement Creation Form -->
      <div id="create-announcement-section" class="mb-8 p-6 bg-gray-800 rounded-lg shadow-md hidden">
        <h3 class="text-2xl font-bold text-blue-300 mb-4">Create New Announcement (Admin Only)</h3>
        <form id="create-announcement-form" class="space-y-4">
          <div>
            <label for="announcement-content" class="block text-gray-300 text-sm font-bold mb-2">Announcement Content</label>
            <textarea id="announcement-content" placeholder="Write your announcement here..." rows="6" required
                      class="input-field w-full p-3 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
          </div>
          <button type="submit" class="button-primary w-full py-3 rounded-md font-bold text-lg hover:shadow-lg transition duration-300">Post Announcement</button>
        </form>
      </div>

      <h2 class="text-3xl font-semibold text-primary mt-10 mb-6">All Announcements</h2>
      <div id="announcements-list" class="space-y-4">
        <p class="text-gray-400 text-center py-4" id="no-announcements-message">No announcements yet.</p>
        <!-- Announcements will be dynamically loaded here by forms.js -->
      </div>
    </section>

  </div>
</main>

<!-- Footer -->
<footer class="bg-gray-900 text-gray-400 text-center p-6 text-sm">
  <p>&copy; <span id="current-year-forms"></span> Arcator.co.uk. All rights reserved.</p>
</footer>

<!-- Message Box (retained) -->
<div id="message-box" class="message-box"></div>

<!-- Custom Confirm Modal (retained) -->
<div id="custom-confirm-modal" class="custom-confirm-modal">
  <div class="custom-confirm-content">
    <button class="close-button">&times;</button>
    <h3 id="confirm-message" class="text-xl font-bold mb-2"></h3>
    <p id="confirm-submessage" class="text-gray-400 mb-6"></p>
    <div class="flex justify-center space-x-4">
      <button id="confirm-yes" class="bg-red-600 text-white px-6 py-2 rounded-md font-bold hover:bg-red-700 transition duration-300">Yes</button>
      <button id="confirm-no" class="bg-gray-500 text-white px-6 py-2 rounded-md font-bold hover:bg-gray-600 transition duration-300">No</button>
    </div>
  </div>
</div>

<!-- JavaScript Imports -->
<script src="forms.js" type="module"></script>
</body>
</html>
