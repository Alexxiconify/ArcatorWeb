<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Community Forms - Arcator.co.uk</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts - Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <!-- Link to theme_variables.css for centralized CSS variables if it exists -->
  <link rel="stylesheet" href="theme_variables.css">
  <!-- Link to navbar.css for navbar specific styling -->
  <link rel="stylesheet" href="navbar.css">
  <!-- Link to forms.css for page-specific styling -->
  <link rel="stylesheet" href="forms.css">
</head>
<body class="antialiased">
<!-- Navbar Placeholder -->
<div id="navbar-placeholder" class="w-full absolute top-0 left-0"></div>

<!-- Hero Section with Background Image -->
<section class="hero-banner rounded-b-lg shadow-xl" style="margin-top: 64px;"> <!-- Added margin-top to account for fixed navbar height -->
  <div class="container mx-auto px-4 text-center hero-content">
    <h1 class="text-5xl md:text-6xl font-extrabold mb-4 leading-tight">Community Discussion Forms</h1>
    <p class="text-xl md:text-2xl mb-8">Create new threads and engage with the Arcator community!</p>
  </div>
</section>

<!-- Main Content Section: Forms and Threads -->
<section class="py-16 bg-gray-800 rounded-lg shadow-inner mx-4 my-8">
  <div class="container mx-auto px-4">
    <div id="loading-spinner" class="flex justify-center items-center h-48" style="display: none;">
      <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"></div>
    </div>

    <div id="login-required-message" class="text-center bg-gray-700 p-8 rounded-lg shadow-md mb-8" style="display: none;">
      <h2 class="text-4xl font-bold text-red-400 mb-6">Login Required</h2>
      <p class="text-lg text-gray-300 mb-8">
        You need to be logged in to create new discussion threads and post comments.
        You can view existing threads and comments without logging in.
      </p>
      <a href="sign.html" class="inline-block bg-blue-600 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-700 transition duration-300 ease-in-out transform hover:scale-105 shadow-lg">Login / Sign Up</a>
    </div>

    <!-- New Thread Form (visible only to logged-in users) -->
    <div id="new-thread-section" class="bg-gray-900 p-8 rounded-lg shadow-md mb-12" style="display: none;">
      <h2 class="text-3xl font-bold text-blue-300 mb-6 text-center">Create New Discussion Thread</h2>
      <form id="create-thread-form" class="space-y-6">
        <div>
          <label for="thread-title" class="block text-gray-300 text-sm font-bold mb-2">Thread Title:</label>
          <input type="text" id="thread-title" class="shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-blue-500" placeholder="e.g., Ideas for New Mini-Games">
        </div>
        <div>
          <label for="thread-content" class="block text-gray-300 text-sm font-bold mb-2">Thread Content (Markdown, HTML, or plain text. Link images/videos directly):</label>
          <textarea id="thread-content" rows="10" class="shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline resize-y focus:ring-2 focus:ring-blue-500" placeholder="Start your discussion here. You can include links to images (.jpg, .png, .gif) and videos (.mp4, .webm) and they will be embedded."></textarea>
          <p class="text-gray-400 text-xs mt-1">Example image: `https://example.com/image.png`</p>
          <p class="text-gray-400 text-xs mt-1">Example video: `https://example.com/video.mp4`</p>
        </div>
        <button type="submit" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-700 transition duration-300 ease-in-out transform hover:scale-105 shadow-lg w-full">
          Create Thread
        </button>
        <p id="form-message" class="text-center mt-4 text-green-400" style="display: none;"></p>
      </form>
    </div>

    <!-- Existing Discussion Threads -->
    <div class="mt-12">
      <h2 class="text-3xl font-bold text-red-400 mb-6 text-center">Recent Discussions</h2>
      <div id="threads-container">
        <!-- Threads will be dynamically loaded here -->
        <p id="no-threads-message" class="text-center text-gray-400" style="display: none;">No discussion threads found yet. Be the first to create one!</p>
        <p id="threads-loading-error" class="text-center text-red-500" style="display: none;">Error loading threads. Please try again later.</p>
      </div>
    </div>
  </div>
</section>

<!-- Footer Section -->
<footer class="bg-gray-900 py-8 text-center text-gray-400 rounded-t-lg shadow-inner mt-8">
  <div class="container mx-auto px-4">
    <p>Â© 2012 - <span id="current-year-forms"></span> Arcator.co.uk. All rights reserved.</p>
    <div class="flex flex-wrap justify-center space-x-6 mt-4">
      <a href="privacy.html" class="hover:text-white transition duration-300 ease-in-out">Privacy Policy</a>
      <a href="terms.html" class="hover:text-white transition duration-300 ease-in-out">Terms of Service</a>
      <a href="https://wiki.arcator.co.uk/" target="_blank" rel="noopener noreferrer" class="hover:text-white transition duration-300 ease-in-out">Wiki</a>
      <a href="infrastructure.html" class="hover:text-white transition duration-300 ease-in-out">Infrastructure</a>
      <a href="admin_and_dev.html" class="hover:text-white transition duration-300 ease-in-out">Admin & Dev</a>
    </div>
  </div>
</footer>

<!-- Custom Confirmation Modal -->
<div id="confirmation-modal" class="modal" style="display: none;">
  <div class="modal-content">
    <h3 id="modal-title">Confirm Action</h3>
    <p id="modal-message">Are you sure you want to perform this action?</p>
    <div class="modal-buttons">
      <button id="confirm-action-btn" class="confirm-btn">Confirm</button>
      <button id="cancel-action-btn" class="cancel-btn">Cancel</button>
    </div>
  </div>
</div>

<!-- Edit Modal -->
<div id="edit-modal" class="modal" style="display: none;">
  <div class="modal-content">
    <h3 id="modal-edit-title">Edit Item</h3>
    <div class="mt-4">
      <label for="edit-title-input" class="block text-gray-300 text-sm font-bold mb-2" id="edit-title-label" style="display: none;">Title:</label>
      <input type="text" id="edit-title-input" class="shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-blue-500" placeholder="Enter new title">
    </div>
    <div class="mt-4">
      <label for="edit-content-textarea" class="block text-gray-300 text-sm font-bold mb-2">Content:</label>
      <textarea id="edit-content-textarea" rows="10" class="shadow appearance-none border rounded w-full py-2 px-3 leading-tight focus:outline-none focus:shadow-outline resize-y focus:ring-2 focus:ring-blue-500" placeholder="Edit content here."></textarea>
    </div>
    <div class="modal-buttons mt-6">
      <button id="save-edit-btn" class="confirm-btn bg-blue-600 hover:bg-blue-700">Save Changes</button>
      <button id="cancel-edit-btn" class="cancel-btn bg-gray-500 hover:bg-gray-600">Cancel</button>
    </div>
  </div>
</div>

<!-- Import themes.js for centralized JavaScript functions -->
<script src="themes.js" type="module"></script>
<!-- Import loadNavbar from navbar.js -->
<script src="navbar.js" type="module"></script>
<!-- Import forms.js for page-specific JavaScript -->
<script src="forms.js" type="module"></script>
</body>
</html>
